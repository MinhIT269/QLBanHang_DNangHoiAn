@model PBL6_QLBH.Dto.Request.EmailOrderModel
<!DOCTYPE html>
<html lang="en">


<head>
    
</head>

<body>

    <!-- START Wrapper -->
    <div class="wrapper">

        <!-- ========== Topbar Start ========== -->
        <header class="topbar">
            <div class="container-fluid">
                <div class="navbar-header">
                    <div class="d-flex align-items-center">
                        <!-- Menu Toggle Button -->
                        <div class="topbar-item">
                            <button type="button" class="button-toggle-menu me-2">
                                <iconify-icon icon="solar:hamburger-menu-broken" class="fs-24 align-middle"></iconify-icon>
                            </button>
                        </div>

                        <!-- Menu Toggle Button -->
                        <div class="topbar-item">
                            <h4 class="fw-bold topbar-button pe-none text-uppercase mb-0">Chi Tiết Đơn Hàng</h4>
                        </div>
                    </div>

                    <div class="d-flex align-items-center gap-1">

                    

                    </div>
                </div>
            </div>
        </header>

        <!-- Right Sidebar (Theme Settings) -->
     
        <!-- ========== Topbar End ========== -->
        <!-- ========== App Menu Start ========== -->
    
        <!-- ========== App Menu End ========== -->
        <!-- ==================================================== -->
        <!-- Start right Content here -->
        <!-- ==================================================== -->
        <div class="page-content">

            <!-- Start Container Fluid -->
            <div class="container-xxl">

                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-body">
                                <!-- Logo & title -->
                                <div class="clearfix pb-3 bg-info-subtle p-lg-3 p-2 m-n2 rounded position-relative">
                                    <div class="float-sm-start">
                                        <div class="auth-logo">
                                            <img class="logo-dark me-1" src="~/images/logo.png" alt="logo-dark" style="height: 35px !important; width: 50px !important;" />
                                        </div>
                                        <div class="mt-3">
                                            <h4>HoiAn-DNG 360</h4>
                                            <address class="mt-3 mb-0">
                                                54 Nguyễn Lương Bằng<br>
                                                Hòa Khánh Bắc, Liên Chiểu, Đà Nẵng<br>
                                                <abbr title="Phone">SĐT:</abbr> 0914 999 999
                                            </address>
                                        </div>
                                    </div>
                                    <div class="float-sm-end">
                                        <div class="table-responsive">
                                            <table class="table table-borderless mb-0">
                                                <tbody>
                                                    <tr>
                                                        <td class="p-0 pe-5 py-1">
                                                            <p class="mb-0 text-dark fw-semibold"> Hóa đơn : </p>
                                                        </td>
                                                        <td class="text-end text-dark fw-semibold px-0 py-1">#INV-@Model.OrderNumber.ToString().ToUpper().Substring(0, 8)</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="p-0 pe-5 py-1">
                                                            <p class="mb-0">Ngày phát hành: </p>
                                                        </td>
                                                        <td class="text-end text-dark fw-medium px-0 py-1">
                                                            @(Model.OrderDate.HasValue
                                                                ? Model.OrderDate.Value.ToString("dd 'tháng' MM 'năm' yyyy")
                                                                : "Không có")
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="p-0 pe-5 py-1">
                                                            <p class="mb-0">Số tiền : </p>
                                                        </td>
                                                        <td class="text-end text-dark fw-medium px-0 py-1">@Model.TotalAmount.ToString("#,0 VNĐ")</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="p-0 pe-5 py-1">
                                                            <p class="mb-0">Tình trạng: </p>
                                                        </td>
                                                        <td class="text-end px-0 py-1">
                                                            
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="position-absolute top-100 start-50 translate-middle">
                                        <img src="~/images/check-2.png" alt="" class="img-fluid">
                                    </div>
                                </div>

                                <div class="clearfix pb-3 mt-4">
                                    <div class="float-sm-start">
                                        <div class="">
                                            <h4 class="card-title">Hóa đơn từ :</h4>
                                            <div class="mt-3">
                                                <h4>HoiAn-DNG.INC</h4>
                                                <p class="mb-2">54 Nguyễn Lương Bằng, Đà Nẵng</p>
                                                <p class="mb-2"><span class="text-decoration-underline">Điện thoại :</span> 0914 999 999</p>
                                                <p class="mb-2"><span class="text-decoration-underline">Email :</span> hoiandng@gmail.com</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="float-sm-end">
                                        <div class="">
                                            <h4 class="card-title">Hóa đơn cho :</h4>
                                            <div class="mt-3">
                                                <h4>@Model.CustomerName</h4>
                                                <p class="mb-2">@Model.CustomerAddress</p>
                                                <p class="mb-2"><span class="text-decoration-underline">Điện thoại :</span> @Model.CustomerPhone</p>
                                                <p class="mb-2"><span class="text-decoration-underline">Email :</span> @Model.CustomerEmail</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                @{
                                    // Tính tổng tiền của tất cả sản phẩm
                                    var totalAmount = Model.TotalAmount;
                                }

                                <div class="row">
                                    <div class="col-12">
                                        <div class="table-responsive table-borderless text-nowrap table-centered">
                                            <table class="table mb-0">
                                                <thead class="bg-light bg-opacity-50">
                                                    <tr>
                                                        <th class="border-0 py-2">Tên sản phẩm</th>
                                                        <th class="border-0 py-2">Số lượng</th>
                                                        <th class="border-0 py-2">Giá(VNĐ) </th>
                                                        <th class="text-end border-0 py-2">Tổng cộng(VNĐ)</th>
                                                    </tr>
                                                </thead> <!-- end thead -->
                                                <tbody>
                                                    @foreach (var product in Model.Orders!)
                                                    {
                                                        <tr>
                                                            <td>
                                                                <div class="d-flex align-items-center gap-3">
                                                                    <div class="rounded bg-light avatar d-flex align-items-center justify-content-center">
                                                                      <img src="" alt="@product.Product.Name" class="avatar">
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td>@product.Quantity</td> <!-- Giả sử số lượng luôn là 1 -->
                                                            <td>@product.Product.Price.ToString("#,0")</td>
                                                            <td class="text-end">@((product.Product.Price * product.Quantity).ToString("#,0"))</td>
                                                        </tr>
                                                    }
                                                </tbody> <!-- end tbody -->
                                            </table> <!-- end table -->
                                        </div> <!-- end table responsive -->
                                    </div> <!-- end col -->
                                </div> <!-- end row -->

                                <div class="row justify-content-end">
                                    <div class="col-lg-5 col-6">
                                        <div class="table-responsive">
                                            <table class="table table-borderless mb-0">
                                                <tbody>
                                                    <tr class="">
                                                        <td class="text-end p-0 pe-5 py-2">
                                                            <p class="mb-0"> Tổng Tiền(VNĐ) : </p>
                                                        </td>
                                                        <td class="text-end text-dark fw-medium  py-2">@totalAmount.ToString("#,0") </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-end p-0 pe-5 py-2">
                                                            <p class="mb-0">Giảm giá : </p>
                                                        </td>
                                                        <td class="text-end text-dark fw-medium py-2">
                                                            @(Model.Discount.HasValue ? $"{Model.Discount}%" : "0%")
                                                        </td>
                                                    </tr>
                                                    @*                                                     <tr>
                                                    <td class="text-end p-0 pe-5 py-2">
                                                    <p class="mb-0">Estimated Tax (15.5%) : </p>
                                                    </td>
                                                    <td class="text-end text-dark fw-medium  py-2">$20.00</td>
                                                    </tr> *@
                                                    <tr class="border-top">
                                                        <td class="text-end p-0 pe-5 py-2">
                                                            <p class="mb-0 text-dark fw-semibold">Tổng tiền thanh toán : </p>
                                                        </td>
                                                        <td class="text-end text-dark fw-semibold  py-2">@Model.TotalAmount.ToString("#,0 VNĐ")</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div> <!-- end col -->
                                </div> <!-- end row -->

                                <div class="mt-3 mb-1">
                                    <div class="text-end d-print-none">

                                    </div>
                                </div>

                            </div> <!-- end card body -->
                        </div> <!-- end card -->
                    </div> <!-- end col -->
                </div> <!-- end row -->

            </div>
            <!-- End Container Fluid -->
            <!-- ========== Footer Start ========== -->
          
            <!-- ========== Footer End ========== -->

        </div>
        <!-- ==================================================== -->
        <!-- End Page Content -->
        <!-- ==================================================== -->

    </div>
    <!-- END Wrapper -->
    <!-- Vendor Javascript (Require in all Page) -->
    <script src="~/js/vendor.js"></script>

    <!-- App Javascript (Require in all Page) -->
    <script src="~/js/app.js"></script>
    <script>
        function exportPDF(orderId) {
            // Chuyển hướng kèm OrderId qua query string
            window.location.href = `/Admin/Order/PDF?id=${orderId}`;
        }
    </script>

</body>

</html>