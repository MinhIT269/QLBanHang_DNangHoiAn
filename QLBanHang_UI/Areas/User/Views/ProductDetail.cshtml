@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model QLBanHang_UI.Models.ViewModel
@using QLBanHang_UI.Models
@{
    var productDetail = ViewData["ProductDetail"] as ProductDto;
}

<!DOCTYPE html>
<html lang="en">


<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Đặc Sản Hội An-Đà Nẵng</title>

    <meta name="keywords" content="HTML5 Template" />
    <meta name="description" content="Đặc Sản Đà Nẵng Hội An" />
    <meta name="author" content="BKDN" />

    <!-- Favicon -->
    <link rel="shortcut icon" href="~/images/logo.png">

    <script>
        WebFontConfig = {
            google: {
                families: ['Open+Sans:300,400,600,700,800', 'Poppins:300,400,500,600,700,800']
            }
        };
        (function(d) {
            var wf = d.createElement('script'),
                s = d.scripts[0];
            wf.src = '/js/webfont.js';
            wf.async = true;
            s.parentNode.insertBefore(wf, s);
        })(document);
    </script>

    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="~/css/bootstrap.min.css">

    <!-- Main CSS File -->
    <link rel="stylesheet" href="~/css/demo9.min.css">
    <link rel="stylesheet" type="text/css" href="~/css/animate.min.css">
    <link rel="stylesheet" type="text/css" href="~/vendor/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="~/vendor/simple-line-icons/css/simple-line-icons.min.css">
</head>

<body class="boxed">
        <div class="page-wrapper">
            <header class="header">
            @await Html.PartialAsync("_Header", Model);

            </header>
        </div>
        <main class="main">
            <nav aria-label="breadcrumb" class="breadcrumb-nav">
                <div class="container">
                    <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="@Url.Action("DashBoard","DashBoard",new {area="User"})">Trang Chủ</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Sản Phẩm</li>
                    </ol>
                </div>
            </nav>
            <div class="container">
                @if (productDetail != null)
                {
                    <div class="product-single-container product-single-default">
                        <div class="cart-message d-none">
                        </div>

                        <div class="row">
                            <div class="col-lg-5 col-md-6 product-single-gallery">
                                <div class="product-slider-container">
                                    <div class="label-group">
                                        <div class="product-label label-hot">HOT</div>
                                        <!---->
                                        <div class="product-label label-sale">
                                            -16%
                                        </div>
                                    </div>

                                    <div class="product-single-carousel owl-carousel owl-theme show-nav-hover">
                                        <div class="product-item">
                                            <img class="product-single-image" src="@productDetail.ImageUrl" data-zoom-image="@productDetail.ImageUrl" style="width: 468px; height: 468px;" alt="product" />
                                        </div>
                                        @if(productDetail.ProductImages != null)
                                        {
                                            @foreach (var item in productDetail.ProductImages)
                                            {
                                                <div class="product-item">
                                                    <img class="product-single-image" src="@item" data-zoom-image="@item" style=" width:468px; height:468px" alt="product" />
                                                </div>
                                            }
                                        }
                                       
                                        
                                    </div>
                                    <!-- End .product-single-carousel -->
                                    <span class="prod-full-screen">
                                        <i class="icon-plus"></i>
                                    </span>
                                </div>

                                <div class="prod-thumbnail owl-dots">
                                    @if(productDetail.ProductImages != null)
                                    {
                                        @foreach (var item in productDetail.ProductImages)
                                        {
                                            <div class="owl-dot">
                                                <img src="@item" style="width:110px; height:110px" alt="product-thumbnail" />
                                            </div>
                                        }
                                    }
                                    
                                </div>
                            </div>
                            <!-- End .product-single-gallery -->

                            <div class="col-lg-7 col-md-6 product-single-details mb-1">
                                <h1 class="product-title">@productDetail.Name</h1>

                                <div class="product-nav">
                               
                                </div>

                                <div class="ratings-container">
                                    <div class="product-ratings">
                                        <span class="ratings" style="width:100%"></span>
                                        <!-- End .ratings -->
                                        <span class="tooltiptext tooltip-top"></span>
                                    </div>
                                    <!-- End .product-ratings -->

                                    <a href="#" class="rating-link">( 6 Đánh giá )</a> @*review controller*@
                                </div>
                                <!-- End .ratings-container -->

                                <hr class="short-divider">

                                <div class="price-box">
                                @if (productDetail.PromotionPrice != null)
                                {
                                    <span class="old-price">
                                        @productDetail.Price.ToString("N0", new System.Globalization.CultureInfo("vi-VN"))đ
                                    </span>
                                    <span class="new-price">
                                        @productDetail.PromotionPrice?.ToString("N0", new System.Globalization.CultureInfo("vi-VN"))đ
                                    </span>
                                }
                                else
                                {
                                    <span class="new-price">
                                        @productDetail.Price.ToString("N0", new System.Globalization.CultureInfo("vi-VN"))đ
                                    </span>
                                }

                                </div>
                                <!-- End .price-box -->

                                <div class="product-desc">
                                        @productDetail.MetaDescription
                                </div>
                                <!-- End .product-desc -->

                                <ul class="single-info-list">
                                    <!---->
                                    <li>
                                        Tồn kho :
                                        <strong>@productDetail.Stock</strong>
                                    </li>

                                    <li>
                                        Danh mục:
                                        @if(productDetail.CategoryNames != null)
                                        {
                                            @foreach (var category in productDetail.CategoryNames)
                                            {
                                                <strong>
                                                    <a href="#" class="product-category">@category</a>
                                                </strong>
                                            }
                                        }
                                    </li>

                                    <li>
                                        Thương Hiệu:
                                        <strong><a href="#" class="product-category">@productDetail.BrandName</a></strong>,
                                    </li>
                                </ul>
                                @* Delete <div class="product-filter-container"*@


                                <div class="product-action">
                                    <div class="product-single-qty">
                                        <input class="horizontal-quantity form-control" type="number" min="1" max="@productDetail.Stock">
                                    </div>
                                    <!-- End .product-single-qty -->
                                    <button type="button" class="btn btn-dark add-cart" id="add-to-cart-btn" data-product-id="@productDetail.ProductId">
                                       Thêm vào giỏ 
                                    </button>
                                </div>
                                <!-- End .product-action -->

                                <hr class="divider mb-0 mt-0">

                                <div class="product-single-share mb-1 pb-2 mt-0 pt-2">

                                    <div class="social-icons mr-2">
                                        <a href="#" class="social-icon social-facebook icon-facebook" target="_blank" title="Facebook"></a>
                                        <a href="#" class="social-icon social-twitter icon-twitter" target="_blank" title="Twitter"></a>
                                        <a href="#" class="social-icon social-linkedin fab fa-linkedin-in" target="_blank" title="Linkedin"></a>
                                        <a href="#" class="social-icon social-gplus fab fa-google-plus-g" target="_blank" title="Google +"></a>
                                        <a href="#" class="social-icon social-mail icon-mail-alt" target="_blank" title="Mail"></a>
                                    </div>
                                    <!-- End .social-icons -->

                                    <a href="#" class="btn-icon-wish add-wishlist" title="Add to Wishlist">
                                    </a>
                                </div>
                                <!-- End .product single-share -->
                            </div>
                            <!-- End .product-single-details -->
                        </div>
                        <!-- End .row -->
                    </div>
                    <!-- End .product-single-container -->
                }
                

                <div class="product-single-tabs">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="product-tab-desc" data-toggle="tab" href="#product-desc-content" role="tab" aria-controls="product-desc-content" aria-selected="true">MÔ TẢ</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" id="product-tab-reviews" data-toggle="tab" href="#product-reviews-content" role="tab" aria-controls="product-reviews-content" aria-selected="false">Đánh Giá (1)</a>
                        </li>
                    </ul>

                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="product-desc-content" role="tabpanel" aria-labelledby="product-tab-desc">
                            <div class="product-desc-content">
                                 @Html.Raw(productDetail.Description)
                            </div>
                            <!-- End .product-desc-content -->
                        </div>
                        <!-- End .tab-pane -->
                        <div class="tab-pane fade" id="product-reviews-content" role="tabpanel" aria-labelledby="product-tab-reviews">
                            <div class="product-reviews-content">
                                <h3 class="reviews-title">1 review for Men Black Sports Shoes</h3>
                                <div class="comment-list">
                                    <div class="comments">
                                        <figure class="img-thumbnail">
                                            <img src="~/images/blog/author.jpg" alt="author" width="80" height="80">
                                        </figure>

                                        <div class="comment-block">
                                            <div class="comment-header">
                                                <div class="comment-arrow"></div>

                                                <div class="ratings-container float-sm-right">
                                                    <div class="product-ratings">
                                                        <span class="ratings" style="width:100%"></span>
                                                        <!-- End .ratings -->
                                                        <span class="tooltiptext tooltip-top"></span>
                                                    </div>
                                                    <!-- End .product-ratings -->
                                                </div>

                                                <span class="comment-by">
                                                    <strong>Joe Doe</strong> – April 12, 2018
                                                </span>
                                            </div>

                                            <div class="comment-content">
                                                <p>Excellent.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="divider"></div>

                                <div class="add-product-review">
                                    <h3 class="review-title">Add a review</h3>

                                    <form action="#" class="comment-form m-0">
                                        <div class="rating-form">
                                            <label for="rating">Your rating <span class="required">*</span></label> 
                                            <span class="rating-stars">
                                                <a class="star-1" href="#">1</a>
                                                <a class="star-2" href="#">2</a>
                                                <a class="star-3" href="#">3</a>
                                                <a class="star-4" href="#">4</a>
                                                <a class="star-5" href="#">5</a>
                                            </span>

                                            <select name="rating" id="rating" required="" style="display: none;">
                                                <option value="">Rate…</option>
                                                <option value="5">Perfect</option>
                                                <option value="4">Good</option>
                                                <option value="3">Average</option>
                                                <option value="2">Not that bad</option>
                                                <option value="1">Very poor</option>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label>Your review <span class="required">*</span></label>
                                            <textarea cols="5" rows="6" class="form-control form-control-sm"></textarea>
                                        </div>
                                        <!-- End .form-group -->


                                        <div class="row">
                                            <div class="col-md-6 col-xl-12">
                                                <div class="form-group">
                                                    <label>Name <span class="required">*</span></label>
                                                    <input type="text" class="form-control form-control-sm" required>
                                                </div>
                                                <!-- End .form-group -->
                                            </div>

                                            <div class="col-md-6 col-xl-12">
                                                <div class="form-group">
                                                    <label>Email <span class="required">*</span></label>
                                                    <input type="text" class="form-control form-control-sm" required>
                                                </div>
                                                <!-- End .form-group -->
                                            </div>

                                            <div class="col-md-12">
                                                <div class=" custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="save-name" />
                                                    <label class="custom-control-label mb-0" for="save-name">Save my
                                                        name, email, and website in this browser for the next time I
                                                        comment.</label>
                                                </div>
                                            </div>
                                        </div>

                                        <input type="submit" class="btn btn-primary" value="Submit">
                                    </form>
                                </div>
                                <!-- End .add-product-review -->
                            </div>
                            <!-- End .product-reviews-content -->
                        </div>
                        <!-- End .tab-pane -->
                    </div>
                    <!-- End .tab-content -->
                </div>
                <!-- End .product-single-tabs -->
                <div class="products-section pt-0">
                    <h2 class="section-title">Sản Phẩm Liên Quan</h2>

                    <div class="products-slider owl-carousel owl-theme dots-top dots-small">
                        @foreach(var product in Model.Products.Take(4))
                        {
                            <div class="product-default left-details">
                                <figure>
                                <a href="@Url.Action("ProductDetail","DashBoard",new {area="User", id =product.ProductId})">
                                        <img src="@product.ImageUrl" alt="product" style="width:300px; height:300px ">
                                    </a>
                                </figure>
                                <div class="product-details">
                                    <div class="category-list">
                                        @foreach(var category in product.CategoryNames)
                                        {
                                        <a href="@Url.Action("CategoryProduct","DashBoard",new {area="User", category=category})" class="product-category">@category</a>
                                        }
                                        
                                    </div>
                                    <h3 class="product-title">
                                        <a href="#">@product.Name</a>
                                    </h3>
                                    <div class="ratings-container">
                                        <div class="product-ratings">
                                            <span class="ratings" style="width:100%"></span>
                                            <!-- End .ratings -->
                                            <span class="tooltiptext tooltip-top"></span>
                                        </div>
                                        <!-- End .product-ratings -->
                                    </div>
                                    <!-- End .product-container -->
                                    <div class="price-box">
                                    @if (product.PromotionPrice != null)
                                    {
                                        <span class="old-price">
                                            @product.Price.ToString("N0", new System.Globalization.CultureInfo("vi-VN"))đ
                                        </span>
                                        <span class="product-price">
                                            @product.PromotionPrice?.ToString("N0", new System.Globalization.CultureInfo("vi-VN"))đ
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="product-price">
                                            @product.Price.ToString("N0", new System.Globalization.CultureInfo("vi-VN"))đ
                                        </span>
                                    }


                                    </div>
                                    <!-- End .price-box -->
                                    <div class="product-action">
                                    <a href="@Url.Action("AddItem","DashBoard", new {area="User", id=product.ProductId})" class="btn-icon btn-add-cart product-type-simple">
                                            <i class="icon-shopping-cart"></i><span>Thêm vào giỏ</span>
                                        </a>
                                        <a href="#" class="btn-icon-wish" title="wishlist">
                                            <i class="icon-heart"></i>
                                        </a>
                                    </div>
                                </div>
                                <!-- End .product-details -->
                            </div>

                        }
                    </div>
                    <!-- End .products-slider -->
                </div>
                <!-- End .products-section -->

                <hr class="mt-0 m-b-5" />

                <!-- End .row -->
            </div>
            <!-- End .container -->
        </main>
        <!-- End .main -->

        
        <!-- End .container -->
    
    <!-- End .page-wrapper -->

    

    <div class="mobile-menu-overlay"></div>
    <!-- End .mobil-menu-overlay -->

    
    <!-- End .mobile-menu-container -->

    @await Html.PartialAsync("_Footer");

    <a id="scroll-top" href="#top" title="Top" role="button"><i class="icon-angle-up"></i></a>

    <!-- Plugins JS File -->
    <script data-cfasync="false" src="~/js/email-decode.min.js"></script>
    <script src="~/js/jquery.min.js"></script>
    <script src="~/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/plugins.min.js"></script>
    <script src="~/js/jquery.appear.min.js"></script>
    <!-- Main JS File -->
    <script src="~/lib/jquery/dist/main.min.js"></script>
    <script>
        $(document).ready(function () {
            // Khi bấm nút Add to Cart
            $('#add-to-cart-btn').on('click', function () {
                // Lấy thông tin cần thiết
                let productId = $(this).data('product-id'); // Lấy ID sản phẩm
                let quantity = $('.horizontal-quantity').val(); // Lấy số lượng sản phẩm từ input
                console.log(productId);
                console.log(quantity);
                // Kiểm tra số lượng hợp lệ
                if (!quantity || quantity <= 0) {
                    alert('Please enter a valid quantity.');
                    return;
                }

                // Gửi dữ liệu đến server bằng AJAX (ví dụ)
                $.ajax({
                    url: '/User/DashBoard/AddItemProductDetail', // Đường dẫn API thêm sản phẩm vào giỏ hàng
                    method: 'POST',
                    data:{
                        productId: productId,
                        quantity: quantity
                    }, 
             
                    success: function (response) {
                        // Xử lý thành công
                        alert('Product added to cart successfully!');
                        // Hiển thị nút View Cart (hoặc cập nhật giỏ hàng)
                        $(".dropdownmenu-wrapper").html(response);
                    },
                    error: function (error) {
                        // Xử lý lỗi
                        console.error(error);
                        alert('Failed to add product to cart.');
                    }
                });
            });
        });
        $(document).on("click", ".btn-remove", function () {
            var cartItemId = $(this).data("id");

            if (!confirm("Bạn có chắc chắn muốn xóa sản phẩm này?")) {
                return;
            }

            // Gửi AJAX request đến server
            $.ajax({
                url: '/User/DashBoard/RemoveItem',
                type: 'GET',
                data: { id: cartItemId },
                success: function (response) {
                    $(".dropdownmenu-wrapper").html(response); // Cập nhật phần còn lại
                    $(".dropdownmenu-wrapper").prepend('<div class="dropdown-cart-header">' + cartHeader + '</div>'); // Thêm lại tiêu đề vào đầu
                },
                error: function () {
                    alert("Có lỗi xảy ra khi xóa sản phẩm.");
                }
            });
        });
    </script>
</body>


<!-- Mirrored from portotheme.com/html/porto_ecommerce/demo9-product.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2024 09:57:28 GMT -->
</html>
